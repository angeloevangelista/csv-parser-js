(()=>{"use strict";var e={216:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function u(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}l((r=r.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.handleInputChange=void 0;const o=i(n(871)),a=i(n(736));function u({inputElement:e,separator:t=","}){return r(this,void 0,void 0,(function*(){if(!e)return Promise.reject("Element not found");if(!e.files||0===e.files.length)return Promise.reject("No file selected.");const{name:n}=e.files[0],r=e.files[0],i=yield o.default({csvFile:r});if(!i)return Promise.resolve(void 0);const{serializedData:u}=a.default({csvContent:i,separator:t});return{filename:n,content:u}}))}t.handleInputChange=u,t.default=u},871:function(e,t){var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function u(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}l((r=r.apply(e,t||[])).next())}))};function r({csvFile:e}){return n(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{try{const n=new FileReader;let r=null;n.onload=()=>{r=n.result,t(null==r?void 0:r.toString())},n.readAsBinaryString(e)}catch(e){n(e)}}))}))}Object.defineProperty(t,"__esModule",{value:!0}),t.loadContent=void 0,t.loadContent=r,t.default=r},736:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.toJson=void 0;const u=o(n(202)),l=a(n(3));function c({csvContent:e,separator:t=","}){const n=new RegExp(t,"g");let r=e.split("\n");const i=l.default(r[0].split(t).map((e=>e.trim()))).useJoker({delimiterChar:'"'}).removeJoker({replacementContent:","});r.shift(),r=r.filter((e=>e.replace(n,"").trim()));let o=[];return r.forEach((e=>{let n=e.split(t);i.length<n.length&&(n=l.default(n).useJoker({delimiterChar:'"'}).removeJoker({replacementContent:","}));let r={};i.forEach(((e,t)=>{const i=n[t];let o;o=i?isNaN(Number(i))?String(i):Number(i):null,r=Object.assign(Object.assign({},r),{[e]:o})})),o.push(r)})),{serializedData:o,validateFields:e=>u.default({data:o,expectedColumns:e})}}t.toJson=c,t.default=c},202:(e,t)=>{function n({data:e,expectedColumns:t}){try{if(e.length<1)throw new Error("No data found.");if(Object.keys(e[0]),e.find((e=>{Object.keys(e)})))throw new Error("Data has inconsistent properties.");if(!e.every((e=>Object.keys(e).every(((e,n)=>t[n]===e)))))throw new Error("Data properties are different from expected.")}catch(t){return{data:e,error:t,isValid:!1}}return{data:e,error:null,isValid:!0}}Object.defineProperty(t,"__esModule",{value:!0}),t.validateFields=void 0,t.validateFields=n,t.default=n},449:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.CSV=void 0;const a=o(n(216)),u=o(n(871)),l=o(n(736)),c=o(n(202)),s={handleInputChange:a.default,loadContent:u.default,toJson:l.default,validateFields:c.default};t.CSV=s,window.CSV=s,t.default=s},3:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=e=>{const t="_JOKER_STRING_";return{useJoker:({delimiterChar:r='"'})=>{const i=[];e.forEach(((e,t)=>{e.startsWith(r)&&i.push({originalArrayBeginIndex:t,originalArrayEndIndex:t}),e.endsWith(r)&&(i[i.length-1].originalArrayEndIndex=t)}));const o=[];i.forEach(((n,r)=>{const i=e.slice(n.originalArrayBeginIndex,n.originalArrayEndIndex+1).join(t).replace(/"/g,"");o.push({orderOfOccurrence:r,value:i})}));const a=[];let u=0;for(let t=0;t<e.length;t++){const n=i.find((e=>e.originalArrayBeginIndex===t));if(n){const e=o.find((e=>e.orderOfOccurrence===u));e&&a.push(e.value),t+=n.originalArrayEndIndex-n.originalArrayBeginIndex,u++}else a.push(e[t])}return{jokerValues:a,removeJoker:n(a).removeJoker}},removeJoker:({replacementContent:n})=>{const r=new RegExp(t,"g");return e.map((e=>e.replace(r,n)))}}};t.default=n},607:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(449),t)}},t={};!function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}(607)})();
//# sourceMappingURL=csv-parser.js.map