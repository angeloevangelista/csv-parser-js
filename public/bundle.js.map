{"version":3,"sources":["webpack://csv-parser-js/./src/csv.ts","webpack://csv-parser-js/./src/index.ts","webpack://csv-parser-js/webpack/bootstrap","webpack://csv-parser-js/webpack/startup"],"names":["__awaiter","this","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","Object","defineProperty","exports","CSV","csvFile","reader","FileReader","csvContent","onload","toString","readAsBinaryString","error","lines","split","header","map","column","trim","replace","shift","values","line","collection","i","length","item","j","assign","push","inputElement","console","files","warn","name","loadContent","filename","content","toJson","window","default","__webpack_module_cache__","__webpack_require__","moduleId","module","__webpack_modules__","call"],"mappings":"2CACA,IAAIA,EAAaC,MAAQA,KAAKD,WAAc,SAAUE,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUC,GAAS,IAAMC,EAAKN,EAAUO,KAAKF,IAAW,MAAOG,GAAKL,EAAOK,IACpF,SAASC,EAASJ,GAAS,IAAMC,EAAKN,EAAiB,MAAEK,IAAW,MAAOG,GAAKL,EAAOK,IACvF,SAASF,EAAKI,GAJlB,IAAeL,EAIaK,EAAOC,KAAOT,EAAQQ,EAAOL,QAJ1CA,EAIyDK,EAAOL,MAJhDA,aAAiBN,EAAIM,EAAQ,IAAIN,GAAE,SAAUG,GAAWA,EAAQG,OAITO,KAAKR,EAAWK,GAClGH,GAAMN,EAAYA,EAAUa,MAAMhB,EAASC,GAAc,KAAKS,YAGtEO,OAAOC,eAAeC,EAAS,aAAc,CAAEX,OAAO,IACtD,MAAMY,EAAM,CACR,YAAYC,GACR,OAAOvB,EAAUC,UAAM,OAAQ,GAAQ,YACnC,OAAO,IAAIK,SAAQ,CAACC,EAASC,KACzB,IACI,MAAMgB,EAAS,IAAIC,WACnB,IAAIC,EAAa,GACjBF,EAAOG,OAAS,KACZD,EAAaF,EAAOT,OACpBR,EAAQmB,aAA+C,EAASA,EAAWE,aAE/EJ,EAAOK,mBAAmBN,GAE9B,MAAOO,GACHtB,EAAOsB,WAKvB,OAAOJ,GACH,MAAMK,EAAQL,EAAWM,MAAM,MAC/B,IAAIC,EAASF,EAAM,GACdC,MAAM,KACNE,KAAKC,GAAWA,EAAOC,OAAOC,QAAQ,KAAM,MACjDN,EAAMO,QACN,MAAMC,EAASR,EAAMG,KAAKM,GAASA,EAAKR,MAAM,OAC9C,IAAIS,EAAa,GAUjB,IAAK,IAAIC,EAAI,EAAGA,EAAIX,EAAMY,OAAQD,IAAK,CACnC,IAAIE,EAAO,GACX,IAAK,IAAIC,EAAI,EAAGA,EAAIZ,EAAOU,OAAQE,IAC/B1B,OAAO2B,OAAOF,EAAM,CAChB,CAACX,EAAOY,IAAKN,EAAOG,GAAGG,KAG/BJ,EAAWM,KAAKH,GAEpB,OAAOH,GAEX,iBAAiBO,GACb,OAAOhD,EAAUC,UAAM,OAAQ,GAAQ,YACnC,IAAK+C,EAED,YADAC,QAAQnB,MAAM,sBAGlB,IAAKkB,EAAaE,OAAuC,IAA9BF,EAAaE,MAAMP,OAE1C,YADAM,QAAQE,KAAK,sBAGjB,MAAM,KAAEC,GAASJ,EAAaE,MAAM,GAC9B3B,EAAUyB,EAAaE,MAAM,GAC7BxB,QAAmBzB,KAAKoD,YAAY9B,GAE1C,MAAO,CACH+B,SAAUF,EACVG,QAHkBtD,KAAKuD,OAAO9B,SAQ9C+B,OAAOnC,IAAMA,EACbD,EAAQqC,QAAUpC,G,cC/ElB,QCAIqC,EAA2B,IAG/B,SAASC,EAAoBC,GAE5B,GAAGF,EAAyBE,GAC3B,OAAOF,EAAyBE,GAAUxC,QAG3C,IAAIyC,EAASH,EAAyBE,GAAY,CAGjDxC,QAAS,IAOV,OAHA0C,EAAoBF,GAAUG,KAAKF,EAAOzC,QAASyC,EAAQA,EAAOzC,QAASuC,GAGpEE,EAAOzC,QClBfuC,CAAoB,M","file":"bundle.js","sourcesContent":["\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst CSV = {\n    loadContent(csvFile) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new Promise((resolve, reject) => {\n                try {\n                    const reader = new FileReader();\n                    let csvContent = '';\n                    reader.onload = () => {\n                        csvContent = reader.result;\n                        resolve(csvContent === null || csvContent === void 0 ? void 0 : csvContent.toString());\n                    };\n                    reader.readAsBinaryString(csvFile);\n                }\n                catch (error) {\n                    reject(error);\n                }\n            });\n        });\n    },\n    toJson(csvContent) {\n        const lines = csvContent.split('\\n');\n        let header = lines[0]\n            .split(',')\n            .map((column) => column.trim().replace(/\"/g, ''));\n        lines.shift();\n        const values = lines.map((line) => line.split(','));\n        let collection = [];\n        // lines.forEach((line) => {\n        //   let item = {};\n        //   header.forEach((headerColumn, headerColumnIndex) => {\n        //     Object.assign(item, {\n        //       [headerColumn]: line[headerColumnIndex],\n        //     });\n        //   });\n        //   collection.push(item);\n        // });\n        for (let i = 0; i < lines.length; i++) {\n            let item = {};\n            for (let j = 0; j < header.length; j++) {\n                Object.assign(item, {\n                    [header[j]]: values[i][j],\n                });\n            }\n            collection.push(item);\n        }\n        return collection;\n    },\n    handleSelectFile(inputElement) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!inputElement) {\n                console.error('Element not found.');\n                return;\n            }\n            if (!inputElement.files || inputElement.files.length === 0) {\n                console.warn('No files selected.');\n                return;\n            }\n            const { name } = inputElement.files[0];\n            const csvFile = inputElement.files[0];\n            const csvContent = yield this.loadContent(csvFile);\n            const serializedCSV = this.toJson(csvContent);\n            return {\n                filename: name,\n                content: serializedCSV,\n            };\n        });\n    },\n};\nwindow.CSV = CSV;\nexports.default = CSV;\n","\"use strict\";\nmodule.exports = require('./csv');\n// window.onload = () => {\n//   let csvInput: HTMLInputElement | null;\n//   csvInput = document.getElementById('csv-input') as HTMLInputElement;\n//   csvInput.addEventListener('change', async (e) => {\n//     console.log(e.target);\n//     const serializedCsv = await window.CSV.handleSelectFile(csvInput);\n//     console.log(serializedCsv);\n//   });\n// };\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module\n__webpack_require__(607);\n// This entry module used 'module' so it can't be inlined\n"],"sourceRoot":""}